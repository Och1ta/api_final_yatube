# Проект «API для Yatube». Python-разработчик (бекенд) (Яндекс.Практикум)

## Описание

API для Yatube представляет собой проект социальной сети в которой реализованы следующие возможности, 
публиковать записи, комментировать записи, а так же подписываться или отписываться от авторов.

## Стек технологий

* Python 3.11,
* Django 4.2,
* DRF,
* JWT + Djoser

## Запуск проекта в dev-режиме

- Клонировать репозиторий и перейти в него в командной строке.
- Установите и активируйте виртуальное окружение c учетом версии Python 3.7 (выбираем python не ниже 3.7):

```bash
python -m venv venv
```

```bash
source venv/Scripts/activate
```

```bash
python -m pip install --upgrade pip
```

- Затем нужно установить все зависимости из файла requirements.txt

```bash
cd yatube_api
```

```bash
pip install -r requirements.txt
```

- Выполняем миграции:

```bash
python manage.py migrate
```

- Создаем суперпользователя:

```bash
python manage.py createsuperuser
```

- Запускаем проект:

```bash
python manage.py runserver
```
### Примеры запросов к API

Для обращения к API сервиса Yatube можно использовать программу Postman.

1. Для начала создадите пользователя. Придумайте новую пару «логин-пароль» и передайте их в поле *body*, выбрав *raw* и *JSON*:

Например:

```
{
    "username": "username",
    "password": "password123456789"
}
```

Отправьте POST-запрос на следующий адрес:

```
http://127.0.0.1:8000/api/v1/users/
```

Должны получить следующий ответ:

```
{
    "email": "",
    "username": "username",
    "id": 1
}
```

2. Теперь для получения токена отправьте POST-запрос с той же парой «логин-пароль» на следующий адрес:

```
http://127.0.0.1:8000/api/v1/jwt/create/
```

Должны получить следующий ответ:

```
{
    "refresh": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.....",
    "access": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9....."
}
```

*access* - это ваш токен авторизации

*refresh* - код необходимый для обновления токена *access*

Скопируйте *access*

3. Для создания поста выберете в POSTMAN во вкладке Authorization тип Bearer token и вставьте в поле token ваш JWT-токен  *access*.

В поле *body* передайте JSON c текстом, например таким:

```
{
    "text": "Самый первый пост."
}
```
Отправьте POST-запрос на следующий адрес:

```
http://127.0.0.1:8000/api/v1/posts/
```
Получите ответ:

```
{
    "id": 1,
    "text": "Самый первый пост.",
    "author": "username",
    "image": null,
    "group": null,
    "pub_date": "2023-05-12T20:10:55.119068Z"
}
```

4. Чтобы посмотреть все посты, отправьте GET-запрос на следующий адрес:

```
http://127.0.0.1:8000/api/v1/posts/
```

Получите список с постами:

```
[
    {
        "id": 1,
        "text": "Самый первый пост.",
        "author": "username",
        "image": null,
        "group": null,
        "pub_date": "2023-05-12T20:10:55.119068Z"
    }
]
```
5. Чтобы посмотреть какой-нибудь  пост, отправьте GET-запрос на следующий адрес с указанием id поста:

```
http://127.0.0.1:8000/api/v1/posts/1/
```

Получите пост с id=1:

```
{
    "id": 1,
    "text": "Самый первый пост.",
    "author": "username",
    "image": null,
    "group": null,
    "pub_date": "2023-05-12T20:10:55.119068Z"
}
```
5. Если вы автор поста, то можно его отредактировать или удалить. А чтобы узнать как это сделать, обязательно загляните по следующем адресу:

```
http://127.0.0.1:8000/redoc/
```

Здесь полная документация к API данного сервиса. Тут можно также узнать как оставлять комментарии, подписываться на других авторов и много чего ещё полезного...

### Автор 

* Кабанов Антон